name = "worker-spotify"
main = "src/index.js"
compatibility_date = "2025-01-15"

# Cron triggers
# */10 * * * * = Every 10 minutes (for Spotify sync)
# 59 16 * * * = Daily at 23:59 GMT+7 / 16:59 UTC (for clearing history)
[triggers]
crons = ["*/10 * * * *", "59 16 * * *"]

# KV namespace untuk storage (optional, bisa pakai R2 atau GitHub)
# [[kv_namespaces]]
# binding = "SPOTIFY_DATA"
# id = "your_kv_namespace_id"

# Environment variables (use wrangler secret for sensitive data)
# SPOTIFY_CLIENT_ID - set via: wrangler secret put SPOTIFY_CLIENT_ID
# SPOTIFY_CLIENT_SECRET - set via: wrangler secret put SPOTIFY_CLIENT_SECRET
# SPOTIFY_REFRESH_TOKENS - set via: wrangler secret put SPOTIFY_REFRESH_TOKENS
# GITHUB_TOKEN - set via: wrangler secret put GITHUB_TOKEN
# GITHUB_REPO - set via: wrangler secret put GITHUB_REPO (format: username/repo)

[[routes]]
pattern = "worker-spotify.luzyver.dev"
custom_domain = true
